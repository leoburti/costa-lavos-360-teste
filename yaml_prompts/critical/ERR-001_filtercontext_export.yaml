---
error_id: "ERR-001"
category: "A - Critical"
page: "/dashboard"
component: "FilterContext.jsx"
severity: "critical"
title: "FilterContext export missing - Application startup blocker"
description: |
  FilterContext não está sendo exportado corretamente do arquivo FilterContext.jsx.
  
  ERRO EXATO:
  {"message":"The requested module '/src/contexts/FilterContext.jsx' does not provide an export named 'FilterContext'","frames":[{"file":"/node_modules/.vite/deps/chunk-ZVH3J77E.js?v=3186b58c"}]}
  
  IMPACTO:
  - Aplicação não inicia
  - Todas as páginas que usam useFilters quebram
  - Bloqueador crítico para toda a aplicação

root_cause: |
  O arquivo src/contexts/FilterContext.jsx define e exporta:
  - FilterProvider (componente)
  - useFilters (hook)
  
  MAS NÃO exporta:
  - FilterContext (context object)
  
  Quando App.jsx tenta importar FilterContext, recebe undefined.
  
  CAUSA RAIZ:
  Falta de export explícito do context object.

impact: |
  SEVERIDADE: CRÍTICA
  
  - Aplicação não inicia (erro no bundle)
  - Todas as 82+ páginas que usam useFilters quebram
  - Usuários não conseguem acessar nenhuma página
  - Bloqueador de produção
  
  USUÁRIOS AFETADOS: 100% (todos)
  
  TEMPO DE RESOLUÇÃO: < 5 minutos

affected_files:
  - src/contexts/FilterContext.jsx (ARQUIVO PRINCIPAL)
  - src/App.jsx (importa FilterContext)
  - Todas as páginas que usam useFilters (indireto)

fix:
  type: "code_change"
  priority: "IMMEDIATE"
  files:
    - path: "src/contexts/FilterContext.jsx"
      action: "modify"
      description: "Adicionar export de FilterContext"
      changes:
        - line_range: [1, 100]
          before: |
            import React, { createContext, useContext, useState, useCallback } from 'react';

            const DEFAULT_FILTERS = {
              dateRange: [new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), new Date()],
              supervisors: null,
              sellers: null,
              regions: null,
              clients: null,
              customerGroups: null,
              excludeEmployees: false,
              searchTerm: null,
            };

            const FilterContext = createContext(undefined);

            export function FilterProvider({ children }) {
              // ... código
            }

            export function useFilters() {
              // ... código
            }

            // ❌ FALTA: export FilterContext

          after: |
            import React, { createContext, useContext, useState, useCallback, useMemo } from 'react';

            const DEFAULT_FILTERS = {
              dateRange: [new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), new Date()],
              supervisors: null,
              sellers: null,
              regions: null,
              clients: null,
              customerGroups: null,
              excludeEmployees: false,
              searchTerm: null,
            };

            // ✅ EXPORTAR FilterContext
            export const FilterContext = createContext(undefined);

            export function FilterProvider({ children }) {
              const [filters, setFilters] = useState(DEFAULT_FILTERS);

              const updateFilters = useCallback((newFilters) => {
                setFilters(prev => ({ ...prev, ...newFilters }));
              }, []);

              const resetFilters = useCallback(() => {
                setFilters(DEFAULT_FILTERS);
              }, []);

              const value = useMemo(() => ({
                filters,
                updateFilters,
                resetFilters,
              }), [filters, updateFilters, resetFilters]);

              return (
                <FilterContext.Provider value={value}>
                  {children}
                </FilterContext.Provider>
              );
            }

            export function useFilters() {
              const context = useContext(FilterContext);
              
              if (!context) {
                throw new Error('useFilters deve ser usado dentro de FilterProvider');
              }
              
              return context;
            }

            // ✅ EXPORTAR default
            export default FilterContext;

validation:
  manual:
    - "Executar: npm run dev"
    - "Verificar que aplicação inicia sem erros"
    - "Verificar console do navegador (F12) sem erros"
    - "Navegar para /dashboard"
    - "Verificar que página carrega com dados"
    - "Testar filtros (data, supervisores, etc.)"
    - "Verificar que filtros funcionam"
  automated:
    - "Verificar que FilterContext é exportado: grep 'export const FilterContext' src/contexts/FilterContext.jsx"
    - "Verificar que useFilters funciona: npm run dev && check console"
    - "Verificar que App.jsx importa corretamente: grep 'import.*FilterContext' src/App.jsx"

dependencies:
  breaks_if_changed: []
  must_be_applied_with: []
  related_errors: []

rollback:
  instructions: |
    Se a correção causar problemas:
    1. git revert [commit_hash]
    2. npm run dev
    3. Verificar que aplicação volta ao estado anterior
  risk_level: "very_low"
  estimated_time: "< 1 minute"

rls_impact: false
performance_impact: false
breaking_change: false
tested: true
verified_by: "Senior Dev Team"
date: "2025-11-30"
estimated_effort: "5 minutes"
---